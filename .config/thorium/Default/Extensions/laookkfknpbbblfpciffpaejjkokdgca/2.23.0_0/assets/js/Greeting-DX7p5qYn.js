import{M as t}from"./Message-BcdCgI6p.js";import{a as e}from"./allComponentsMounted-Dqy5K4Uf.js";import{persistent as a}from"./reactiveCustomization-CaJFMm70.js";import{T as o}from"./index-C_ay7xUY.js";import{s}from"./showAnyway-iBeVTgqC.js";import{c as i,d as r,n,A as p}from"./dynamic-import-helper-Gh3O-GNF.js";import{a as d}from"./modal-D5eTjgvI.js";import{s as l}from"./enums-Cgv4i8uw.js";import{B as g}from"./BaseDropdown-x2dYnnCF.js";import{B as c}from"./BaseDropdownOption-C6EewfIZ.js";import{B as u}from"./BaseDropdownDivider-Bay0Demn.js";import h from"./BaseIcon-CCkbWtl5.js";import{n as j}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./MobileBlur-B2s9dLKD.js";import"./VueBase-CYtBAh2Z.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./pinia-CCjyjLnb.js";import"./portal-vue.esm-BTKM9g0x.js";import"./array-YYQw31d9.js";import"./main-DaaZyiXy.js";import"./Logger-DgjqecXr.js";import"./string-DLOjEt1Y.js";import"./localStorage-B4mFdj8F.js";import"./legacyUserMigration-DJj0rzI-.js";import"./migrateLegacyUserMessageHandler-FH_m4diU.js";import"./auth-D2YAhF74.js";import"./persistStore-7VuxlznA.js";import"./embeddedApp-C73bLmHI.js";import"./experiments-C9Yd4CP-.js";import"./flashMessageQueue-CiwsHFUx.js";import"./info-DdD9a7JK.js";import"./constants-u23t4s7p.js";import"./index-byH5_iOK.js";import"./appZStack-CXXM5U-T.js";import"./ResizeSensor-ZXOsDHeC.js";import"./promisifiedChrome-YDDyAvDe.js";import"./modal-DNJEx5xp.js";import"./BaseDropdownContent-DpVJFI_8.js";import"./constants-CALDQiUE.js";import"./index-C2sSf61p.js";import"./icon-ellipsis-D7nTOXaQ.js";const w=j({name:"Greeting",components:{BaseIcon:h,BaseDropdownDivider:u,BaseDropdownOption:c,BaseDropdown:g,ThreeColLayout:o,Message:t},mixins:[e],setup:()=>({mantraManager:m.models.mantraManager,showAnyway:s,dropdown:i()}),data:()=>({editingName:!1}),computed:{date:()=>m.models.date,name:()=>(a.displayname||"").trim(),greeting(){const t=r.getDayPart(this.date.get("date"));let e={name:this.name,punctuation:r.endsWithEndPunctuation(this.name)?"":"."};return e.content=this.name||this.editingName?`Good ${t}, `:`Good ${t}`,e}},mounted(){n.$on("greeting:name:edit",(()=>this.editing(!0)))},destroyed(){n.$off("greeting:name:edit",(()=>this.editing(!0)))},methods:{toggleDropdown(t){var e;this.$emit("stop-cycle",t),null==(e=this.dropdown)||e.openDropdown()},showMantra(){var t;!this.mantraManager.noMantra||this.$plus?(this.mantraManager.isEnabled()&&!this.mantraManager.getActiveItem()?this.mantraManager.getActiveItem():this.mantraManager.isEnabled()||this.mantraManager.getActiveItem()?this.mantraManager.isEnabled()&&this.mantraManager.getActiveItem()&&this.$emit("show-mantra"):(this.mantraManager.toggleEnabled(),this.mantraManager.getActiveItem()),null==(t=this.dropdown)||t.closeDropdown(),p.capture("mantra show",{feature:"mantras"})):d(l.UPSELL_MANTRAS,"dash")},editing(t){var e;this.$emit("stop-cycle",t),this.editingName=t,null==(e=this.dropdown)||e.closeDropdown()},onEditNameClick(){this.editing(!0),p.capture("display name change",{feature:"profile"})}}},(function(){var t=this,e=t._self._c;return e("three-col-layout",{directives:[{name:"mobile-click",rawName:"v-mobile-click",value:t.toggleDropdown.bind(null,!0),expression:"toggleDropdown.bind(null, true)"}],staticClass:"app-container has-dash-icon greeting",class:{"show-anyway":t.showAnyway.includes("greeting")},attrs:{"data-show-anyway":"greeting","data-test":"greeting"},scopedSlots:t._u([{key:"center",fn:function(){return[e("message",{attrs:{message:t.greeting,"editing-name":t.editingName},on:{editing:t.editing,toggle:t.toggleDropdown}})]},proxy:!0},{key:"right",fn:function(){return[e("base-dropdown",{ref:"dropdown",attrs:{"container-class":"dash","data-test":"more-toggle"},scopedSlots:t._u([{key:"toggle",fn:function(){return[e("div",{staticClass:"icon-wrapper dark dark-full"},[e("base-icon",{staticClass:"icon",attrs:{src:"icon-ellipsis",size:"18px"}})],1)]},proxy:!0}])},[e("base-dropdown-option",{attrs:{"data-test":"show-mantra"},on:{click:t.showMantra}},[e("base-icon",{attrs:{src:"message-square-quote"}}),e("span",[t._v("Show today's mantra")])],1),e("base-dropdown-divider"),e("base-dropdown-option",{attrs:{"data-test":"edit-name"},on:{click:function(e){return e.stopPropagation(),t.onEditNameClick.apply(null,arguments)}}},[e("base-icon",{attrs:{src:"pencil"}}),e("span",[t._v("Edit your name")])],1)],1)]},proxy:!0}])})}),[],!1,null,"775dd5e8").exports;export{w as default};