import{V as e,r as t}from"./dynamic-import-helper-Gh3O-GNF.js";import{g as i,d as s}from"./onboarding-BnjvsMNe.js";import"./array-YYQw31d9.js";import"./main-DaaZyiXy.js";import"./Logger-DgjqecXr.js";import"./string-DLOjEt1Y.js";import"./enums-Cgv4i8uw.js";import"./helpers-DBbhml_y.js";import"./TabLeaderElection-8EqWBm0z.js";import"./focusModeState-D4CLHiD7.js";import"./LocalStorageStoreSyncedItem-CtVH-muf.js";import"./onboarding-Bdvt2O8-.js";import"./compareObjects-BF7sSNEf.js";import"./modal-DNJEx5xp.js";import"./SubscriptionSummary-RRqVWeCc.js";import"./persistStore-7VuxlznA.js";import"./reactiveCustomization-CaJFMm70.js";import"./VueBase-CYtBAh2Z.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./pinia-CCjyjLnb.js";import"./portal-vue.esm-BTKM9g0x.js";import"./constants-CALDQiUE.js";import"./constants-BfBD_H-d.js";import"./authService-DSVbm6Rd.js";import"./auth-D2YAhF74.js";import"./legacyUserMigration-DJj0rzI-.js";import"./migrateLegacyUserMessageHandler-FH_m4diU.js";import"./login-kENE0gaj.js";import"./icon-confetti-BvRSomF2.js";import"./focusModeHelpers-CbYS8k-X.js";import"./PomodoroTimers-CyrfcuWH.js";import"./experiments-C9Yd4CP-.js";import"./siteBlockerGroups-9WPnbAn4.js";import"./constants-Dqx3dGLK.js";import"./SettingsTypes-BotgHBzA.js";import"./accessToken-tlcZZvow.js";import"./tasksMockData-Co81Ft0X.js";import"./tasksViewState-DusFQxW4.js";import"./ViewState-CalcjAWV.js";import"./appZStack-CXXM5U-T.js";const p=new(e.extend({name:"ModalDevPanelManager",data:()=>({experimentMap:i(),definitions:s,pinnedStep:null}),methods:{setStepActive(e,t){const i=()=>m.trigger("modal:show",e,{subStepIndex:t,force:!0});m.modals?i():m.once("modalContainer:created:checkForced",i)},setPinnedStepActiveOnDashLoad({stepId:e,subStepIndex:i,experimentId:s,variantId:p}={}){let n;if(s){const t=this.experimentMap[s],i=t&&t.variants[p];n=i&&i.steps[e]}else n=this.definitions[e];n&&(this.toggleStepPinned(n,{stepId:e,subStepIndex:i,experimentId:s,variantId:p}),t.appsReady?this.setStepActive(n,i):m.once("appsReady",(()=>{this.setStepActive(n,i)})))},toggleStepPinned(e,{stepId:t,subStepIndex:i,experimentId:s,variantId:p}={}){const n=localStorage.getObject("devPanel:pinnedStep");n?this.objectsMatch(n,{stepId:t,subStepIndex:i,experimentId:s,variantId:p})?(this.$set(e,"pinned",!e.pinned),this.pinnedStep=e.pinned?e:null,this.updateSubStepIndex(e,e.pinned?i:void 0),null===this.pinnedStep&&m.trigger("modal:close")):this.objectsMatch((({stepId:e,experimentId:t,variantId:i})=>({stepId:e,experimentId:t,variantId:i}))(n),{stepId:t,experimentId:s,variantId:p})?this.updateSubStepIndex(e,i):(this.pinnedStep&&(this.$set(this.pinnedStep,"pinned",!1),this.updateSubStepIndex(this.pinnedStep,void 0)),this.$set(e,"pinned",!0),this.updateSubStepIndex(e,i),this.pinnedStep=e):(this.$set(e,"pinned",!0),this.pinnedStep=e,this.updateSubStepIndex(e,i)),e.pinned?localStorage.setObject("devPanel:pinnedStep",{stepId:t,subStepIndex:i,experimentId:s,variantId:p}):localStorage.removeItem("devPanel:pinnedStep")},updateSubStepIndex(e,t){void 0===t?this.$delete(e,"pinnedSubStepIndex"):this.$set(e,"pinnedSubStepIndex",t)},objectsMatch:(e,t)=>new Array(...new Set([...Object.keys(e),...Object.keys(t)])).every((i=>e[i]===t[i]))}}));export{p as default};