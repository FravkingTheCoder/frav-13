const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/FocusModeInsightsApp-CtuzKD0O.js","assets/js/dynamic-import-helper-Gh3O-GNF.js","assets/js/array-YYQw31d9.js","assets/js/main-DaaZyiXy.js","assets/js/Logger-DgjqecXr.js","assets/js/string-DLOjEt1Y.js","assets/js/AppPopup-kxasHFCt.js","assets/js/ResizeSensor-ZXOsDHeC.js","assets/js/globalKeyEventManager-DTQSIy-h.js","assets/js/_plugin-vue2_normalizer-DeUNqxFl.js","assets/css/AppPopup-B5pA7VRo.css","assets/js/AppViewSwitchDynamic-DUaF00u2.js","assets/js/SmoothReflow-44YdkIfk.js","assets/js/allComponentsMounted-Dqy5K4Uf.js","assets/css/SmoothReflow-C9vjifOL.css","assets/js/appViewSwitchMixin-BsLJ76Hr.js","assets/css/AppViewSwitchDynamic-nwV8-yjr.css","assets/js/BaseDropdown-x2dYnnCF.js","assets/js/BaseDropdownContent-DpVJFI_8.js","assets/js/constants-CALDQiUE.js","assets/js/index-C2sSf61p.js","assets/css/BaseDropdownContent-DKsGy_8Z.css","assets/js/portal-vue.esm-BTKM9g0x.js","assets/js/icon-ellipsis-D7nTOXaQ.js","assets/css/BaseDropdown-CwtM7hMN.css","assets/js/AppView-D98wzsjm.js","assets/css/AppView-CsYj23U-.css","assets/js/AppHeader-D7x6VYmc.js","assets/js/AppHeaderControl-kJjUFX4q.js","assets/css/AppHeaderControl-BU4A7Xbx.css","assets/js/constants-BfBD_H-d.js","assets/js/icon-close-DRlspKs3.js","assets/css/AppHeader-Cslc5PS9.css","assets/js/BaseIcon-CCkbWtl5.js","assets/css/BaseIcon-CPmL0n7V.css","assets/js/BaseDropdownOption-C6EewfIZ.js","assets/css/BaseDropdownOption-DaYMTb1b.css","assets/js/focusModeInsightsViewState-C6w2d_Pg.js","assets/js/ViewState-CalcjAWV.js","assets/js/appZStack-CXXM5U-T.js","assets/js/OverflowCarousel-BV1nq2ZZ.js","assets/js/constants-BpVlFj04.js","assets/js/icon-next-CI-_n-sg.js","assets/css/OverflowCarousel-CJcn8NZ7.css","assets/js/reactiveCustomization-CaJFMm70.js","assets/js/VueBase-CYtBAh2Z.js","assets/js/_commonjsHelpers-B3K3fdV-.js","assets/js/ClickOutside-DCLvi2fj.js","assets/js/pinia-CCjyjLnb.js","assets/js/pomodoroCompleted-PtbKLdeQ.js","assets/js/persistStore-7VuxlznA.js","assets/js/focusModeState-D4CLHiD7.js","assets/js/LocalStorageStoreSyncedItem-CtVH-muf.js","assets/js/PomodoroTimers-CyrfcuWH.js","assets/js/promisifiedChrome-YDDyAvDe.js","assets/js/login-kENE0gaj.js","assets/js/authService-DSVbm6Rd.js","assets/js/auth-D2YAhF74.js","assets/js/legacyUserMigration-DJj0rzI-.js","assets/js/enums-Cgv4i8uw.js","assets/js/migrateLegacyUserMessageHandler-FH_m4diU.js","assets/js/onboarding-Bdvt2O8-.js","assets/js/modal-D5eTjgvI.js","assets/js/v-style-B81TrGnF.js","assets/js/internalDataMetrics-C_vQFJrM.js","assets/js/focusModeHelpers-CbYS8k-X.js","assets/js/TimeframeService-C9IRtAXQ.js","assets/js/streaks-aZsP8Pn2.js","assets/js/BaseForm-CAbyV7zb.js","assets/js/FormMessage-D8y-6rLo.js","assets/js/icon-alert-BikrS7AG.js","assets/css/FormMessage-BcXv0ZVT.css","assets/css/BaseForm-CdgC6Psc.css","assets/js/AppConfirmCancel-2_xBrO2S.js","assets/css/AppConfirmCancel-DUrPhER4.css","assets/js/FormToggle-h8Me6KUc.js","assets/js/FormFieldWrapper-CrSgQOtf.js","assets/css/FormFieldWrapper-Bg7cTjMQ.css","assets/js/ToggleSwitch-BMo4SbmD.js","assets/css/ToggleSwitch-CTfmYf-M.css","assets/css/FormToggle-DUKt37kY.css","assets/js/FormInput-CEvl15Rd.js","assets/js/SoftFocus-BUhesXB-.js","assets/js/compareObjects-BF7sSNEf.js","assets/js/AppLoading-DWsYUtJy.js","assets/css/AppLoading-DHYBGgbD.css","assets/js/InlineNumberInput-B2lN8plY.js","assets/css/InlineNumberInput-D0yp2QxM.css","assets/js/CircleIndicator-CTdaW5YP.js","assets/css/CircleIndicator-DucGE1qd.css","assets/css/FocusModeInsightsApp-Cr3a4Azv.css"])))=>i.map(i=>d[i]);
import{_ as t}from"./main-DaaZyiXy.js";import{a as e}from"./allComponentsMounted-Dqy5K4Uf.js";import{G as s,j as i,r as o,f as a,n as r,A as n,N as p,a2 as c}from"./dynamic-import-helper-Gh3O-GNF.js";import{a as l}from"./appZStack-CXXM5U-T.js";import d from"./icon-confetti-BvRSomF2.js";import{u}from"./internalDataMetrics-C_vQFJrM.js";import{g as h}from"./focusModeHelpers-CbYS8k-X.js";import{a as g}from"./appToggleMixin-DeAIUg7Z.js";import{u as f}from"./focusModeInsightsViewState-C6w2d_Pg.js";import{C as v}from"./CircleIndicator-CTdaW5YP.js";import{d as A,L as w}from"./focusModeState-D4CLHiD7.js";import{A as y}from"./AppDash-DkDer3J7.js";import{n as b}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{s as M}from"./showAnyway-iBeVTgqC.js";import{computed as C}from"./reactiveCustomization-CaJFMm70.js";import{a as _}from"./modal-D5eTjgvI.js";import{b as I}from"./constants-BfBD_H-d.js";import D from"./icon-close-DRlspKs3.js";const S=b(s({name:"FocusModeMetric",components:{AppDash:y,FocusModeInsightsApp:()=>t((()=>import("./FocusModeInsightsApp-CtuzKD0O.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90])),CircleIndicator:v},mixins:[g({useViewStateStore:f,analytics:new n({feature:"focus-mode-insights"})})],setup:()=>({internalDataMetrics:u()}),computed:{timeFocusedFriendlyStringMetric(){return this.internalDataMetrics.getMetric("pomodoroStats","today")},timeFocusedFriendlyString(){return this.timeFocusedFriendlyStringMetric.value.getterValue||"-"},goalDays(){return this.settings.goalDays},goalEnabled(){return this.settings.goalEnabled},goalMinutes(){return this.settings.goalMinutes},todayMinutesMetric(){return this.internalDataMetrics.getMetric("pomodoroStats","todayMinutes")},indicatorProgress(){if(null===this.todayMinutesMetric.value.getterValue||!this.todayMinutesMetric.value.storeLoaded)return 0;const t=this.todayMinutesMetric.value.getterValue;return Math.max(Math.min(t,this.goalMinutes),0)/this.goalMinutes},circleIndicatorVisible(){return!!this.goalEnabled&&this.goalDays.includes(i())},canShowNotification(){return 1===this.indicatorProgress&&o.tabVisible&&this.circleIndicatorVisible&&A.currentValue},settings:()=>h()},watch:{async canShowNotification(t){if(!t)return;const e=localStorage.getItem(w);e&&a(new Date(Number(e)))===a(new Date)||(this.setLastShowDateIfCompleted(),r.$emit("flashMessage",{message:"Focus Goal completed!",icon:d,persist:5e3,confetti:!0}))},goalMinutes(t,e){e>0&&t>0&&t!==e&&1!==this.indicatorProgress&&localStorage.removeItem(w)}},mounted(){m.on("focusInsights:toggle",this.togglePopup),m.on("focusMode:starting",this.setLastShowDateIfCompleted)},destroyed(){m.off("focusInsights:toggle",this.togglePopup),m.off("focusMode:starting",this.setLastShowDateIfCompleted)},methods:{setLastShowDateIfCompleted(){1===this.indicatorProgress&&localStorage.setItem(w,`${Date.now()}`)},triggerAppOpenEvent(){m.trigger("focusInsightsApp:opened")},triggerAppCloseEvent(){m.trigger("focusInsightsApp:closed")}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closePopup,expression:"closePopup"}],staticClass:"focus-mode-metric"},[e("app-dash",{attrs:{label:"Focused Today","app-visible":t.popupActive,"blur-background-hover":!0,"data-test":"focus-mode-insight"},on:{click:t.togglePopupAndCaptureIfOpen},scopedSlots:t._u([{key:"icon",fn:function(){return[t.circleIndicatorVisible?e("circle-indicator",{attrs:{progress:t.indicatorProgress,"data-test":"circle-indicator-svg","data-circle-progress":t.indicatorProgress}}):t._e()]},proxy:!0},{key:"icon-right",fn:function(){return[e("span",{attrs:{"data-test":"time-focused-string"}},[t._v(t._s(t.timeFocusedFriendlyString))])]},proxy:!0}])}),e("transition",{attrs:{name:"slide-down-fade"},on:{"after-enter":t.triggerAppOpenEvent,"after-leave":t.triggerAppCloseEvent}},[t.popupActive?e("focus-mode-insights-app",{on:{close:t.togglePopupAndCaptureIfOpen}}):t._e()],1)],1)}),[],!1,null,"45bcbfd8").exports,j=new n({feature:"meta add"}),P={name:"AddMetric",components:{AppDash:y,AppPopup:()=>t((()=>import("./AppPopup-kxasHFCt.js")),__vite__mapDeps([6,7,8,1,2,3,4,5,9,10])),FocusModeMetric:S},mixins:[e],props:{disable:{type:Boolean,default:!1},collections:{type:Object,required:!0},standalone:{type:Boolean,default:!1}},setup:()=>({showAnyway:M}),data:()=>({popupActive:!1}),computed:{nippleClass(){return this.openToRight?"nipple-top-left":"nipple-top-right"},focused:{get:()=>l.isOnTop("addMetric"),set(t){t?l.add("addMetric"):l.remove("addMetric")}},focusModeInsightVisible(){return C.focusInsightVisible&&!this.$plus&&!p()},showLabel:()=>C.dashAppTextLabels===I.Always,weatherOrCalendarVisible:()=>C.weatherVisible||C.calendarVisible,weatherDashAppWidth:()=>C.weatherVisible?o.weatherDashAppWidth:0,calendarDashAppWidth:()=>C.calendarVisible?o.calendarDashAppWidth:0},created(){this.standalone&&(this.widgetId="addMetric"),m.on("globalEvent:esc",this.closeApp)},destroyed(){m.off("globalEvent:esc",this.closeApp)},methods:{add(t){this.$plus?(this.closeApp(),this.$emit("add",t.nameLCP)):t.upsellId&&this.showUpsell(t.upsellId),m.trigger("notification:dismiss")},toggleApp(){this.popupActive?this.closeApp():this.showApp()},showApp(){if(this.disable)return;this.openToRight=!1,j.capture("meta add click"),this.popupActive=!0;const t=document.querySelector(".popup:not(.app)");t&&(t.style.display="none"),this.focused=!0},closeApp(){if(!this.popupActive)return;this.popupActive=!1;const t=document.querySelector(".popup");t&&(t.style.display="block"),this.focused=!1},showUpsell(t){_(t,"dash")}}},V=()=>{c(((t,e)=>({"3289dd18":t.weatherDashAppWidth,"28cb8ca8":t.calendarDashAppWidth})))},k=P.setup;P.setup=k?(t,e)=>(V(),k(t,e)):V;const F=b(P,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container add-metric needs-hover",class:{active:t.popupActive,"show-anyway":t.showAnyway.includes("add-metric")},attrs:{"data-test":"add-metric"+(t.$plus?"-plus":"-free"),"data-show-anyway":"add-metric"}},[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeApp,expression:"closeApp"}],staticClass:"relative"},[e("app-dash",{attrs:{icon:"icon/add",label:"Add","app-visible":t.popupActive,"data-ob":"add-metric","data-test":"add-metric-dash"},on:{click:t.toggleApp}}),e("transition",{attrs:{name:"slide-down-fade"}},[t.popupActive?e("app-popup",{attrs:{position:"bottom-left",region:"top-right",width:420,focused:t.focused},on:{close:function(e){t.popupActive=!1}},nativeOn:{click:function(e){t.focused=!0}}},[e("div",{staticClass:"title-wrapper"},[e("div",{staticClass:"title"},[t._v("Add metric")]),e("div",{staticClass:"description"},[t._v("Keep track of important info.")])]),e("div",{staticClass:"tiles"},t._l(t.collections,(function(s){return e("div",{key:s.nameLCP,staticClass:"tile",attrs:{"data-test":"add-"+s.nameLCS},on:{click:function(e){return t.add(s)}}},[e("inline-svg",{staticClass:"icon widget-icon",class:"icon-"+s.nameLCP,attrs:{src:s.icon}}),e("div",{staticClass:"widget-name"},[t._v(t._s(s.fullNameCS))]),t.$plus?t._e():e("span",{staticClass:"badge badge-plus"},[t._v("Plus")])],1)})),0),t.$touch?e("span",{staticClass:"mobile-close",on:{click:t.closeApp}},[e("span",{staticClass:"icon-wrapper u--mobile-show-bg hide"},[e("inline-svg",{staticClass:"icon icon-hide",attrs:{src:D}})],1)]):t._e()]):t._e()],1)],1),e("transition",{attrs:{name:"fade"}},[t.focusModeInsightVisible?e("focus-mode-metric",{key:"focus-mode-insight"}):t._e()],1),t.weatherOrCalendarVisible&&!t.$plus?e("div",{staticClass:"top-right-dash-measure",class:{labels:t.showLabel}}):t._e()],1)}),[],!1,null,"01434386").exports;export{F as A,S as F};