import{M as e}from"./MaskedOverlay-C2UPWDjy.js";import{G as t,A as s}from"./dynamic-import-helper-Gh3O-GNF.js";import{S as a}from"./onboarding-Bdvt2O8-.js";import{n as r}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./array-YYQw31d9.js";import"./main-DaaZyiXy.js";import"./Logger-DgjqecXr.js";import"./string-DLOjEt1Y.js";import"./enums-Cgv4i8uw.js";const o=r(t({name:"Tour",components:{MaskedOverlay:e},props:{id:{type:String,required:!0},name:{type:String,default:""},subSteps:{type:Array,default:null},activeSubStepIndex:{type:Number,default:0},activeSubStep:{type:Object,required:!0},plans:{type:Object,default:()=>({})},sales:{type:Object,default:()=>({})},plansError:{type:Boolean,default:!1},onCreated:{type:Function,default:()=>{}},onDestroyed:{type:Function,default:()=>{}},progressVisible:{type:Boolean,default:!0}},setup:()=>({StepState:a}),data:()=>({maskDimensions:[],maskKey:0,maskActive:!1}),computed:{activeSubStepProgressText(){return"progressBarText"in this.activeSubStep?this.activeSubStep.progressBarText:this.activeSubStep.componentProps&&"heading"in this.activeSubStep.componentProps?this.activeSubStep.componentProps.heading:""},activeSubStepClass(){var e;return this.activeSubStep.class||"sub-step-"+(null==(e=this.activeSubStep.name)?void 0:e.toLowerCase().replaceAll(" ","-"))},activeSubComponent(){var e;return(null==(e=this.activeSubStep)?void 0:e.component)||""}},created(){s.disableCaptureExceptFeatures(["onboarding","paywall","upgrade","notifications"]),m.tourActive=!0,this.onCreated()},destroyed(){m.tourActive=!1,this.onDestroyed(),s.enableCaptureForAllFeatures()},methods:{updateMaskDimensions(e){this.maskDimensions=e,this.maskKey+=1},onClick(){m.trigger("globalEvent:click")}}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"tour dark dark-full",attrs:{"data-test":"tour"},on:{mousedown:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),e.onClick.apply(null,arguments)}}},[e.progressVisible?t("div",{staticClass:"progress"},e._l(e.subSteps,(function(s,a){return t("div",{key:a,staticClass:"progress-item-wrapper",class:{active:e.activeSubStepIndex===a,disabled:e.activeSubStep.lockProgressBar||s.lockProgressBar},attrs:{"data-test":"progress-btn"},on:{click:function(t){return e.$emit("goToSubStep",a)}}},[t("div",{staticClass:"progress-item"},[e._v(e._s(e.activeSubStepIndex===a?e.activeSubStepProgressText:""))])])})),0):e._e(),t("transition",{attrs:{appear:"",name:"fade",mode:"out-in"},on:{"before-enter":function(t){return e.$emit("beforeSubStepEnter")},leave:function(t){e.maskActive=!1},"after-leave":function(t){return e.$emit("afterSubStepLeave")}}},[t(e.activeSubComponent,e._b({key:e.activeSubStepIndex,tag:"component",class:e.activeSubStepClass,attrs:{plans:e.plans,sales:e.sales,"plans-error":e.plansError,"parent-modal-name":e.name,name:e.activeSubStep.name},on:{dismiss:function(t){return e.$emit("stepComplete",{state:e.StepState.Dismissed})},next:function(t){return e.$emit("subStepComplete")},updateMaskDimensions:e.updateMaskDimensions,maskReady:function(t){e.maskActive=!0}}},"component",e.activeSubStep.componentProps,!1))],1),t("masked-overlay",{key:e.maskKey,staticClass:"overlay tour-overlay",attrs:{"mask-dimensions":e.maskDimensions,"mask-active":e.maskActive}})],1)}),[],!1,null,"191ad410").exports;export{o as default};