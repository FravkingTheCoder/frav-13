import{c as s,n as e,x as t}from"./dynamic-import-helper-Gh3O-GNF.js";import{a as i}from"./array-YYQw31d9.js";import a from"./info-DdD9a7JK.js";const n={messageText:"If the problem persists, please ",linkText:"contact us."};class o{constructor({message:s,id:e=i(),error:t=!1,button:o,buttons:r,persist:c=t,closeButtonEnabled:d=!0===c,contact:m=!!t&&n,icon:l=(t?a:void 0),onDismiss:g,description:f,confetti:p}){this.id=e,this.message=s,this.persist=c||4e3,this.closeButtonEnabled=d,l&&(this.icon=l),t&&(this.error=t),o?this.buttons=[o]:r&&(this.buttons=r),g&&(this.onDismiss=g),m&&(this.contact=!0===m?n:m),f&&(this.description=f),p&&(this.confetti=p)}}const r=t,c=s([]);function d(){return c.value[0]}function m(s){c.value.push(new o(s))}function l(s){e.sendCrossTabMessage("flashMessage:dismiss",s),g(s)}function g(s){var e,t;const i=c.value.findIndex((e=>e.id===s));null==(t=null==(e=c.value[i])?void 0:e.onDismiss)||t.call(e),~i&&c.value.splice(i,1)}e.$on("flashMessage",m),e.$on("flashMessage:dismiss",l),e.addCrossTabMessageListener("flashMessage:dismiss",g),r.addRecurringCrossTabMessageListener({msgId:"flashMessage",success:m}),window.addEventListener("message",(s=>{if("data"in s&&"object"==typeof s.data&&s.data){const e=s.data;if("msgId"in e&&"string"==typeof e.msgId&&"flashMessage"===e.msgId&&"response"in e&&"object"==typeof e.response&&e.response){const s=e.response;"message"in s&&"string"==typeof s.message&&s.message&&m({...s,message:s.message})}}}));export{d as g,l as r};