const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Launchpad-C3HFThKt.js","assets/js/bookmarkUtils-BF12Kzff.js","assets/js/dynamic-import-helper-Gh3O-GNF.js","assets/js/array-YYQw31d9.js","assets/js/main-DaaZyiXy.js","assets/js/Logger-DgjqecXr.js","assets/js/string-DLOjEt1Y.js","assets/js/promisifiedChrome-YDDyAvDe.js","assets/js/allComponentsMounted-Dqy5K4Uf.js","assets/js/showAnyway-iBeVTgqC.js","assets/js/VueBase-CYtBAh2Z.js","assets/js/_commonjsHelpers-B3K3fdV-.js","assets/js/ClickOutside-DCLvi2fj.js","assets/js/pinia-CCjyjLnb.js","assets/js/portal-vue.esm-BTKM9g0x.js","assets/js/reactiveCustomization-CaJFMm70.js","assets/js/modal-D5eTjgvI.js","assets/js/enums-Cgv4i8uw.js","assets/js/_plugin-vue2_normalizer-DeUNqxFl.js","assets/css/Launchpad-DNSbjwJk.css","assets/js/pomodoroCompleted-PtbKLdeQ.js","assets/js/persistStore-7VuxlznA.js","assets/js/focusModeState-D4CLHiD7.js","assets/js/LocalStorageStoreSyncedItem-CtVH-muf.js","assets/js/PomodoroTimers-CyrfcuWH.js","assets/js/login-kENE0gaj.js","assets/js/authService-DSVbm6Rd.js","assets/js/auth-D2YAhF74.js","assets/js/legacyUserMigration-DJj0rzI-.js","assets/js/migrateLegacyUserMessageHandler-FH_m4diU.js","assets/js/onboarding-Bdvt2O8-.js"])))=>i.map(i=>d[i]);
import{_ as t}from"./main-DaaZyiXy.js";import{G as e,ak as n,ag as o,o as a,C as s,al as i,am as r,ah as c,A as d,u as l}from"./dynamic-import-helper-Gh3O-GNF.js";import{T as u}from"./index-C_ay7xUY.js";import{a as p}from"./allComponentsMounted-Dqy5K4Uf.js";import{useCalendarEventStore as h}from"./calendarEvents-Cv0zlkT3.js";import{computed as v}from"./reactiveCustomization-CaJFMm70.js";import f from"./BaseIcon-CCkbWtl5.js";import{c as g}from"./accessToken-tlcZZvow.js";import{S as _}from"./SmoothReflow-44YdkIfk.js";import{n as j}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./array-YYQw31d9.js";import"./Logger-DgjqecXr.js";import"./string-DLOjEt1Y.js";import"./pinia-CCjyjLnb.js";import"./localStorage-B4mFdj8F.js";import"./legacyUserMigration-DJj0rzI-.js";import"./enums-Cgv4i8uw.js";import"./migrateLegacyUserMessageHandler-FH_m4diU.js";import"./auth-D2YAhF74.js";import"./persistStore-7VuxlznA.js";import"./embeddedApp-C73bLmHI.js";import"./experiments-C9Yd4CP-.js";import"./flashMessageQueue-CiwsHFUx.js";import"./info-DdD9a7JK.js";import"./constants-u23t4s7p.js";import"./index-byH5_iOK.js";import"./appZStack-CXXM5U-T.js";import"./ResizeSensor-ZXOsDHeC.js";import"./promisifiedChrome-YDDyAvDe.js";import"./modal-DNJEx5xp.js";import"./index-D_K2V-H-.js";import"./VueBase-CYtBAh2Z.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./portal-vue.esm-BTKM9g0x.js";const y=j(e({name:"Schedule",components:{ThreeColLayout:u,BaseIcon:f,Launchpad:()=>t((()=>import("./Launchpad-C3HFThKt.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])),SmoothReflow:_},mixins:[p],setup:()=>({formatTime:n,calendarEventStore:h(),MS_IN_1_MINUTE:o,openWindow:a,connectToGoogleCalendar:g,isSafari:s()}),computed:{launchpadVisible:()=>v.launchpadVisible,todayDate(){const t=m.models.date.get("hour").getTime();return new Date(t).getDate()},today(){const t=m.models.date.get("hour").getTime(),e=new Date(t);return`${i(e,!1)} ${r(e)}`},todayEvents(){const t=m.models.date.get("date").getTime();return this.calendarEventStore.getEventsForDay(0).map((e=>({...e,isInMoreThan5Minutes:e.start>t+5*o,timeUntilString:e.start>t+45*o?"in "+Math.round((e.start-t)/c)+" hr":"in "+Math.round((e.start-t)/o)+" min"}))).filter((t=>!t.allDay&&t.end>m.models.date.get("date").getTime()))},event(){return this.todayEvents[0]},todayEventsString(){const t=this.todayEvents.length-1;return t<=0?"":"+"+t+" more"},focusUntilString(){var t;if(!this.calendarEventStore.nextEvent)return"";const e=(null==(t=this.calendarEventStore.nextEvent)?void 0:t.start)-5*o;return m.models.date.get("date").getTime()>=e?"":n(new Date(e))},ctaButton(){if(!this.calendarEventStore.linked)return{action:()=>g("center below calendar"),icon:"icon/google-calendar",text:"Connect to Google Calendar"};if(this.event&&!this.event.isInMoreThan5Minutes&&this.event.meetingLink){const t=this.event.meetingLink;return{action:()=>a(t),icon:"icon-log-in",text:"Join meeting"}}if(this.event&&this.event.isInMoreThan5Minutes&&this.focusUntilString&&!this.$touch)return{action:this.countdownFocus,icon:"icon/apps/focus-mode",text:"Focus until "+this.focusUntilString};if(this.event){const t=this.event;return{action:()=>this.openEvent(t),icon:"icon/date/calendar-link",text:"Open event"}}return this.$touch?null:{action:this.startFocusMode,icon:"icon/apps/focus-mode",text:"Start Focusing"}}},mounted(){this.calendarEventStore.refresh()},methods:{async countdownFocus(){d.capture("calendar focus until event click",{feature:"calendar"});const e=(await t((async()=>{const{usePomodoroSessionStore:t}=await import("./pomodoroCompleted-PtbKLdeQ.js").then((t=>t.b));return{usePomodoroSessionStore:t}}),__vite__mapDeps([20,2,3,4,5,6,21,22,23,24,15,10,11,12,13,14,7,25,26,27,28,17,29,30,16]))).usePomodoroSessionStore();await l((()=>e.loaded)).toBe(!0),e.playing&&await e.complete({switchAfterComplete:!1,completedManually:!0}),await e.update({countDownTimerLength:this.calendarEventStore.nextEvent.start-Date.now()-5*o}),this.startFocusMode()},startFocusMode(){m.trigger("focusMode:start")},openEvent(t){d.capture("calendar event click",{feature:"calendar"}),a(t.link)}}}),(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"dash-schedule app-container hide-apps-no-fade",attrs:{"data-test":"dash-schedule"}},[e("three-col-layout",{staticClass:"has-dash-icon big-search-wrapper",scopedSlots:t._u([{key:"left",fn:function(){return[t._t("nav")]},proxy:!0},{key:"center",fn:function(){return[e("div",{staticClass:"schedule hide-apps-fade"},[e("div",{staticClass:"schedule-buttons"},[t.ctaButton?e("div",{staticClass:"button dash-button",attrs:{"data-test":"calendar-cta"},on:{click:t.ctaButton.action}},[e("span",[e("base-icon",{attrs:{src:t.ctaButton.icon,size:"16px"}}),t._v(" "+t._s(t.ctaButton.text)+" ")],1)]):t._e()]),e("div",{staticClass:"schedule-below-buttons",attrs:{"data-test":"description-line"}},[e("svg",{staticClass:"calendar-icon-with-text",attrs:{width:"19",height:"19",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M8 2V6M16 2V6M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),e("text",{attrs:{x:"50%",y:"60%","dominant-baseline":"middle","text-anchor":"middle"}},[t._v(t._s(t.todayDate))])]),t.calendarEventStore.linked?t.event?t.event?[e("div",{staticClass:"event",on:{click:function(e){return t.openWindow(t.event.link)}}},[e("div",{staticClass:"summary"},[t._v(t._s(t.event.summary))]),e("div",[t._v(t._s(t.formatTime(new Date(t.event.start)))+" - "+t._s(t.formatTime(new Date(t.event.end))))])]),t.todayEventsString?e("div",{staticClass:"more-events",on:{click:function(e){return t.openWindow("https://calendar.google.com/calendar/u/0/r/day")}}},[t._v(t._s(t.todayEventsString))]):t._e(),t.calendarEventStore.staleDataWarningVisible?e("base-icon",{attrs:{src:"icon/info",title:"There was an issue getting your events. The data you see may not be up to date"}}):t._e()]:t._e():e("div",[t._v("No events")]):e("div",[t._v("Connect your calendar to see your next events")])],2)])]},proxy:!0}],null,!0)}),t.isSafari?t._e():e("smooth-reflow",{staticClass:"launchpad-container",attrs:{"await-apps-ready":!0}},[t.launchpadVisible?e("launchpad"):t._e()],1)],1)}),[],!1,null,"1e34ffaf").exports;export{y as default};