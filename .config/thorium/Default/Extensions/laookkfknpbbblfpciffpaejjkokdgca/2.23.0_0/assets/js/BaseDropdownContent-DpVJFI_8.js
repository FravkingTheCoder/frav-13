import{a as t,c as i,D as e,d as o,e as n,f as s,g as d,N as a,h as l,i as p}from"./constants-CALDQiUE.js";import{G as r,ar as h,c as g,r as c,q as w,n as u,aw as f,a2 as m}from"./dynamic-import-helper-Gh3O-GNF.js";import{a as b}from"./array-YYQw31d9.js";import{b as y}from"./index-C2sSf61p.js";import{n as B}from"./_plugin-vue2_normalizer-DeUNqxFl.js";const v=r({name:"BaseDropdownContainer",props:{target:{type:[Element,null],default:null},scrollTarget:{type:[Element,null],default:null},boundScrollX:{type:Boolean,default:!1},boundScrollY:{type:Boolean,default:!0},position:{type:String,default:t.Bottom},positionOffset:{type:Number,default:i},alignment:{type:String,default:e.Left},alignmentOffset:{type:Number,default:o},closeDropdown:{type:Function,required:!0},nipple:{type:Boolean,default:!0},nippleAlignmentOffset:{type:Number,default:n},minWidth:{type:String,default:"160px"},width:{type:String,default:""},maxWidth:{type:String,default:"100vw"},windowEdgePadding:{type:Number,default:s},disableCloseEvent:{type:Boolean,default:!1},disablePointerEvents:{type:Boolean,default:!1}},setup(t){h("closeDropdown",t.closeDropdown);const i=`clip-${b()}`;return{clipId:i,clipPathUrl:`url(#${i})`,resizeObserver:null,resizeElementRef:g(),dropdownContainer:g()}},data(){return{dropdownX:0,dropdownY:0,dropdownWidth:0,dropdownHeight:0,dropdownPositionState:d.Original,nippleDisplacement:0,nipplePosition:this.position,nippleVisible:this.nipple,nippleSize:a,maxWindowWidth:"100vw"}},computed:{windowDimensions:()=>c.windowDimensions,positionIsXBased(){return this.position===t.Top||this.position===t.Bottom||this.position===t.OverlayTop||this.position===t.OverlayBottom},positionIsYBased(){return this.position===t.Left||this.position===t.Right}},watch:{windowDimensions:{async handler(){await w(),await w(),this.onResize()},deep:!0,immediate:!0}},mounted(){this.setupScrollTarget(this.scrollTarget),this.disableCloseEvent||u.$on("dropdown:close",this.closeDropdown),this.resizeObserver=y(this.resizeElementRef,this.onResize)},destroyed(){var t;null==(t=this.resizeObserver)||t.stop(),this.destroyScrollTarget(this.scrollTarget),this.disableCloseEvent||u.$off("dropdown:close")},methods:{onResize(){var t;if(!this.target||!this.dropdownContainer)return void this.closeDropdown();const i=this.target.getBoundingClientRect(),e=this.dropdownContainer.getBoundingClientRect(),o=null==(t=this.scrollTarget)?void 0:t.getBoundingClientRect(),[n,s,d,a,p,r,h]=this.getUpdatedCoordinatesPositionAlignment(i,e,o),g=this.getUpdatedNippleDisplacement(i,n,s,p);this.dropdownX=n,this.dropdownY=s,this.dropdownWidth=d,this.dropdownHeight=a,this.dropdownPositionState=h,this.nippleDisplacement=g,this.nipplePosition=l[p],this.nippleVisible=r,this.maxWindowWidth=o?o.width+"px":"100vw"},calculateBoundingRect(i,o,n,s){let d=0,l=0,p=o.width,r=o.height;const h=this.nipple&&this.nippleVisible&&this.position!==t.OverlayTop&&this.position!==t.OverlayBottom,g=(h?this.nippleAlignmentOffset:0)-this.alignmentOffset;return h&&(n!==t.Top&&n!==t.Bottom||(r-=a),n!==t.Right&&n!==t.Left||(p-=a)),n===t.Top?(d=i.x-g,l=i.y-o.height-this.positionOffset):n===t.Right?(d=i.x+i.width+(this.positionOffset+a),l=i.y-g):n===t.Bottom?(d=i.x-g,l=i.y+i.height+(this.positionOffset+a)):n===t.Left?(d=i.x-o.width-this.positionOffset,l=i.y-g):n===t.OverlayTop?(d=i.x-g,l=i.y-this.positionOffset):n===t.OverlayBottom&&(d=i.x-g,l=i.y-o.height+i.height-this.positionOffset),s===e.Right?this.positionIsXBased?d-=p-i.width-2*g:this.positionIsYBased&&(l-=r-i.height-2*g):s===e.Center&&(this.positionIsXBased?d-=p/2-i.width/2-g:this.positionIsYBased&&(l-=r/2-i.height/2-g)),[d,l,p,r]},getWindowMinMax(t){let i=this.windowEdgePadding,e=this.windowEdgePadding,o=this.windowDimensions.width-this.windowEdgePadding,n=this.windowDimensions.height-this.windowEdgePadding;return t&&(this.boundScrollX||this.boundScrollY)&&(this.boundScrollX&&(i=t.left+this.windowEdgePadding,o=t.right-this.windowEdgePadding),this.boundScrollY&&(e=t.top+this.windowEdgePadding,n=t.bottom-this.windowEdgePadding)),this.dropdownPositionState===d.Floating&&this.nipple&&(this.positionIsXBased?(e+=a,n-=a):this.positionIsYBased&&(i+=a,o-=a)),[i,e,o,n]},getBoundedCoordinatesWithinWindowMinMax(i,e,o,n,s,d){let a=this.nipple;const[l,p,r,h]=this.getWindowMinMax(d),g=(this.boundScrollX||!this.scrollTarget)&&(s===t.Left||s===t.Right),c=(this.boundScrollY||!this.scrollTarget)&&(s===t.Top||s===t.Bottom);return i<l?(i=l,g&&(a=!1)):i+o>r&&(i=r-o,g&&(a=!1)),e<p?(e=p,c&&(a=!1)):e+n>h&&(e=h-n,c&&(a=!1)),[i,e,a]},getOppositePositionAndAlignment(i,e,o,n,s){let d=this.position,a=this.alignment;const[r,h,g,c]=this.getWindowMinMax(s);return(e<h||e+n>c)&&(this.position===t.Top||this.position===t.Bottom?d=l[this.position]:a=p[this.alignment]),(i<r||i+o>g)&&(this.position===t.Left||this.position===t.Right?d=l[this.position]:a=p[this.alignment]),[d,a]},boundingRectInWindowMinMax(t,i,e,o,n){const[s,d,a,l]=this.getWindowMinMax(n);return f(t,i,e,o,s,d,a,l)},getUpdatedCoordinatesPositionAlignment(t,i,e){const[o,n,s,a]=this.calculateBoundingRect(t,i,this.position,this.alignment),[l,p,r]=this.getBoundedCoordinatesWithinWindowMinMax(o,n,s,a,this.position,e),[h,g]=this.getOppositePositionAndAlignment(o,n,s,a,e),[c,w,u,f]=this.calculateBoundingRect(t,i,h,g),[m,b,y]=this.getBoundedCoordinatesWithinWindowMinMax(c,w,u,f,h,e),B=this.boundingRectInWindowMinMax(o,n,s,a,e),v=this.boundingRectInWindowMinMax(this.positionIsYBased?c:m,this.positionIsXBased?w:b,u,f,e);return B?[o,n,s,a,this.position,this.nipple,d.Original]:v||this.dropdownPositionState===d.Opposite?[m,b,u,f,h,y,y||!this.nipple?d.Opposite:d.Floating]:[l,p,s,a,this.position,r,d.Floating]},getUpdatedNippleDisplacement(i,e,o,n){let s=0;const d=i.width/2-a,l=i.height/2-a;return n===t.Top||n===t.Bottom?s=i.left-e+d+this.alignmentOffset:n!==t.Right&&n!==t.Left||(s=i.top-o+l+this.alignmentOffset),s},setupScrollTarget(t){null==t||t.addEventListener("scroll",this.onResize)},destroyScrollTarget(t){null==t||t.removeEventListener("scroll",this.onResize)}}}),P=()=>{m(((t,i)=>({"7c760726":t.dropdownX,"7c760727":t.dropdownY,"9355a518":t.dropdownWidth,"0afcf18e":t.dropdownHeight,62887743:t.windowEdgePadding,"6166ab5a":t.maxWindowWidth,bbb3b3e8:t.nippleDisplacement,"48a80614":t.nippleSize,ded9a3f6:t.width,"58265df5":t.minWidth,"7bf60bba":t.maxWidth,"34cb6a99":t.clipPathUrl})))},x=v.setup;v.setup=x?(t,i)=>(P(),x(t,i)):P;const O=B(v,(function(){var t=this,i=t._self._c;return t._self._setupProxy,i("div",t._g({ref:"dropdownContainer",staticClass:"base-dropdown-container reset-app-styles",on:{mousedown:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()},wheel:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}}},t.$listeners),[i("div",{staticClass:"base-dropdown-container-shadow"}),i("div",{staticClass:"base-dropdown-container-content"},[i("svg",{staticClass:"base-dropdown-container-content-mask-svg"},[i("clipPath",{attrs:{id:t.clipId}},[t.nippleVisible?i("path",{class:[`mask-nipple-${t.nipplePosition}`],attrs:{d:"M5.58579 1.41421L0 7H14L8.41421 1.41421C7.63316 0.633165 6.36684 0.633164 5.58579 1.41421Z",fill:"black"}}):t._e(),i("rect",{staticClass:"mask-rectangle",attrs:{x:"0",y:"0"}})])]),i("div",{ref:"resizeElementRef",class:{"disable-pointer-events":t.disablePointerEvents}},[t._t("default")],2)])])}),[],!1,null,"8e1e9eca").exports;const W=B({name:"BaseDropdownContent"},(function(){var t=this;return(0,t._self._c)("div",t._g({staticClass:"base-dropdown-content"},t.$listeners),[t._t("default")],2)}),[],!1,null,"5d20c578").exports;export{W as B,O as a};